{"ast":null,"code":"import _slicedToArray from\"/home/barbarik/js/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";import Card from\"./shared/Card\";import Button from\"./shared/Button\";import RatingSelect from\"./RatingSelect\";import FeedbackContext from\"../context/FeedbackContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),btnDisabled=_useState4[0],setBtnDisabled=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(10),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){if(text===''){setBtnDisabled(true);setMessage(null);}else if(text!==''&&text.trim().length<=10){setBtnDisabled(true);setMessage('Enter atleast 10 characters');}else{setMessage(null);setBtnDisabled(false);}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);feedbackEdit.item={};feedbackEdit.edit=false;}else addFeedback(newFeedback);setText('');}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would your rate our service?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["useState","useContext","useEffect","Card","Button","RatingSelect","FeedbackContext","FeedbackForm","addFeedback","feedbackEdit","updateFeedback","text","setText","btnDisabled","setBtnDisabled","message","setMessage","rating","setRating","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedback","id"],"sources":["/home/barbarik/js/feedback-app/src/components/FeedbackForm.jsx"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\"\nimport Card from \"./shared/Card\"\nimport Button from \"./shared/Button\"\nimport RatingSelect from \"./RatingSelect\"\nimport FeedbackContext from \"../context/FeedbackContext\"\n\nfunction FeedbackForm() {\n    const {addFeedback, feedbackEdit, updateFeedback} = useContext(FeedbackContext)\n    const [text,setText] = useState('')\n    const [btnDisabled,setBtnDisabled] = useState(true)\n    const [message,setMessage] = useState('')\n    const [rating,setRating] = useState(10)\n\n    useEffect(() => {\n            if(feedbackEdit.edit===true) {\n                setBtnDisabled(false)\n                setText(feedbackEdit.item.text)\n                setRating(feedbackEdit.item.rating)\n            }\n    }, [feedbackEdit])\n\n    const handleTextChange = (e) => {\n        if( text=== '' )\n        {\n            setBtnDisabled(true)\n            setMessage(null)\n        }\n        else if( text!== '' && text.trim().length <= 10)\n        {\n            setBtnDisabled(true)\n            setMessage('Enter atleast 10 characters')\n        }\n        else\n        {\n            setMessage(null)\n            setBtnDisabled(false)\n        }\n        setText(e.target.value)\n    }\n\n    const handleSubmit = (e) =>\n    {\n        e.preventDefault()\n        if(text.trim().length > 10) {\n            const newFeedback = {\n                text,\n                rating\n            }\n            if(feedbackEdit.edit===true)\n            {\n                updateFeedback(feedbackEdit.item.id, newFeedback)\n                feedbackEdit.item = {}\n                feedbackEdit.edit = false\n            }\n            else\n                addFeedback(newFeedback)\n            setText('')\n\n        }\n    }\n\n  return (\n    <Card>\n        <form onSubmit={handleSubmit}>\n            <h2>How would your rate our service?</h2>\n            <RatingSelect select={(rating) => {setRating(rating)}} />\n            <div className=\"input-group\">\n                <input onChange={handleTextChange} type=\"text\" placeholder=\"Write a review\" value={text} />\n                <Button type=\"submit\" isDisabled={btnDisabled}>Send</Button>\n            </div>\n            {message && <div className=\"message\">{message}</div> }\n        </form>\n    </Card>\n  )\n}\n\nexport default FeedbackForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}